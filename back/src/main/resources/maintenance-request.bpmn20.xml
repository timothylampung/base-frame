<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns:flowable="http://flowable.org/bpmn"
             xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             typeLanguage="http://www.w3.org/2001/XMLSchema"
             expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="Fixed">
    <BPMNDiagram xmlns="http://www.omg.org/spec/BPMN/20100524/DI">
        <BPMNPlane>
            <BPMNShape bpmnElement="maintenanceRequest_complete_ST">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="120.0" x="-60.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="maintenanceRequest_draft_ST">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="120.0" x="-60.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="start">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="48.0" x="-24.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="end">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="48.0" x="-24.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="maintenanceRequest_draft_UT">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="120.0" x="-60.0" y="-24.0"/>
            </BPMNShape>
        </BPMNPlane>
    </BPMNDiagram>
    <BPMNDiagram xmlns="http://www.omg.org/spec/BPMN/20100524/DI">
        <BPMNPlane>
            <BPMNShape bpmnElement="maintenanceRequest_complete_ST">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="120.0" x="-60.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="maintenanceRequest_draft_ST">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="120.0" x="-60.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="start">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="48.0" x="-24.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="end">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="48.0" x="-24.0" y="-24.0"/>
            </BPMNShape>
            <BPMNShape bpmnElement="maintenanceRequest_draft_UT">
                <Bounds xmlns="http://www.omg.org/spec/DD/20100524/DC" height="48.0" width="120.0" x="-60.0" y="-24.0"/>
            </BPMNShape>
        </BPMNPlane>
    </BPMNDiagram>

    <process id="maintenance_request_workflow" name="Maintenance Request Workflow" isExecutable="true">
        <startEvent id="start"/>
        <sequenceFlow id="flow1.1" sourceRef="start" targetRef="maintenanceRequest_draft_ST"/>

        <serviceTask id="maintenanceRequest_draft_ST" name="draft_ST"
                     flowable:expression="#{maintenanceRequest_draft_ST.execute(execution)}"/>
        <sequenceFlow id="flow2.1" sourceRef="maintenanceRequest_draft_ST"
                      targetRef="maintenanceRequest_draft_UT"/>

        <userTask id="maintenanceRequest_draft_UT"
                  name="my.spotit.asset.maintenance.domain.model.DexMaintenanceRequest:DRAFTED"
                  flowable:assignee="#{maintenanceRequestRouter.findDrafterAssignee(requestId)}">
        </userTask>

        <sequenceFlow id="flow2.3" sourceRef="maintenanceRequest_draft_UT"
                      targetRef="maintenanceRequest_complete_ST"/>


        <sequenceFlow sourceRef="maintenanceRequest_complete_ST" targetRef="end"
                      id="maintenanceRequest_complete_ST-end"/>
        <serviceTask id="maintenanceRequest_complete_ST" name="complete_ST"
                     flowable:expression="#{maintenanceRequest_complete_ST.execute(execution)}"/>
        <endEvent id="end"/>
    </process>
</definitions>